{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block body %}
    <style>
        *{padding:0;margin:0;box-sizing:border-box;}
        header{display:flex; justify-content:space-between;;margin-bottom:100px; align-items:center; padding : 0 50px;}
        header h1{font-size : 70px}
        body{background-color:rgb(54,54,54); overflow-x:hidden; width:100vw}
        header a{text-decoration:none;}
        #recherche{display: flex;justify-content: center;color: whitesmoke;}
        #recherche .barre {background: url('{{ asset('img/loupe 1.svg') }}') center no-repeat; background-size: contain;border: none;height: 34px;width: 34px;cursor: pointer;transition: transform 125ms;animation: retrecissement_recherche 625ms;color: transparent;}
        #recherche .barre:hover {transform: scale(120%);}
        #recherche .barre:focus {background: none;border: solid 1px rgb(255, 255, 255);height: 21px;width: 380px;color: whitesmoke;cursor: text;transform: scale(100%);animation: elargissement_recherche 500ms;}
        @keyframes elargissement_recherche {from {width: 0px;} to {width: 380px;}}
        @keyframes retrecissement_recherche {from {background: none;border: solid 1px rgb(255, 255, 255);width: 380px;height: 21px;} 20% {background: none;border: solid 1px rgb(255, 255, 255);width: 380px;height: 21px;} to {background: none;border: solid 1px rgb(255, 255, 255);width: 0px;height: 21px;}}
        .overlay{height:100vh;background-color:rgb(20,20,20,0); transition-duration:1s;position:absolute;top:0;left:0;z-index:10;max-width:0;width:80vw;}
        #case_menu_lateral:checked ~ label .overlay{display:block; max-width:80vw; background-color:rgba(30,30,30,0.8)}
        #liste_conversations{display:flex;flex-direction:column; width:100vw;padding:5%;align-items:center}
        .discussion{display:grid; align-items:center; grid-template-columns: 1fr 4fr 2fr; grid-auto-rows: 50px;margin-bottom:20px;width:clamp(500px, 100%, 800px); background-color:#549956; border-radius:65px; color:white}
        .photo_discussion_conteneur{grid-column:1/2; grid-row:1/3; background-color:rgb(200,200,200); border-radius:50%; overflow:hidden; height: 100px; width : 100px; display:flex; justify-content:center; align-items:center;}
        .photo_discussion{width:95px; height:95px}
        .nom_discussion{grid-column:2/3;grid-row:1/2; padding : 0 5%;}
        .dernier_message{grid-column:2/3;grid-row:2/3; padding : 0 10%;}
        .date_dernier_message{grid-column:3/4;grid-row:1/3; padding : 0 10%;}
        #plus_discussion{display:flex;justify-content:center;align-items:center; color:rgb(160,160,160); cursor:pointer; height:50px;}
        .barre_horizontale{height:1px; background-color:rgb(160,160,160);width:clamp(50px, 30vw, 200px);margin:0 5%}
        #menu_lateral{position:absolute;top:0;left:98%;width:20vw;padding:0 2%;transition-duration:1s; display:flex; flex-direction:column;align-items:center;z-index:10; min-height:100vh; background-color:rgba(100,100,100,0.5)}
        #case_menu_lateral{display:none;}
        #case_menu_lateral:checked ~ #menu_lateral{left:80%; background-color:rgb(50,50,50)}
        .barre_horizontale_lateral{height:1px; background-color:black;width:100%;margin:20px 5%}
        #photo_user{width:clamp(30px, 100%, 100px);margin-top:20px;}
        #liste_amis{flex-grow:1}
        #deconnection{height:50px;width:50px; margin : 20px 0}
    </style>

    <header>
        <a style="color:black;" href="{{ path('accueil') }}"><h1>C<span><img src="{{ asset('img/coze.svg') }}" height="48px"></span>ZE</h1></a>
        <div id="recherche">
            <input class="barre" type="text" name="text" id="barreSearch">
        </div>
        <label for='case_menu_lateral'>
            <img class='lien_lateral' src='' alt='lien panneau latÃ©ral'>
        </label>
    </header>

    <main>
        <input type='checkbox' id='case_menu_lateral'>
        <label for='case_menu_lateral'>
            <div class='overlay'></div>
        </label>
        <div id='liste_conversations'>
            {% for discussion in discussions | slice(0,3) %}
                <div class='discussion'>
                    <div class='photo_discussion_conteneur'>
                        <img class='photo_discussion' src='{{ asset('img/profil.svg') }}' alt='photo_discussion'>
                    </div>
                    <h3 class='nom_discussion'>{{ discussion.getNom() }}</h3>
                    {% if not discussion.getMessages() is empty %}
                        <p class='dernier_message'>{{ (discussion.getMessages() | last).getMessage() }}</p>
                        <p class='date_dernier_message'>{{ (discussion.getMessages() | last).getDateEnvoie() | date("d/m/Y")}}
                    {% endif %}
                </div>
            {% endfor %}
            <div id='plus_discussion'>
                <div class='barre_horizontale'></div>
                    <p>Plus&nbsp;de&nbsp;conversation</p>
                <div class='barre_horizontale'></div>
            </div>
        </div>

        <div id='menu_lateral'>
            <img id='photo_user' src='{{ asset('img/profil.svg') }}' alt='photo_user'>
            <div class='barre_horizontale_lateral'></div>
            <h3>Amis&nbsp;-&nbsp;{{ amis | length}}</h3>
            <div id='liste_amis'>
                {% for ami in amis %}
                    <div></div>
                {% endfor %}
            </div>
            <img id='deconnection' src='{{ asset('img/se deconnecter.png') }}' alt='deconnection'>
        </div>
    </main>
{% endblock %}